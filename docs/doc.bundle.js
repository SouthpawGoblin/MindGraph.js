!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAP_HORIZONTAL_INTERVAL=40,t.MAP_VERTICAL_INTERVAL=20,t.MAP_NODE_STYLES={root:{fontSize:28,fontFamily:"Arial",fontWeight:"300",fontStyle:"normal",color:"#fff",background:"#666666",borderWidth:4,borderColor:"#000",borderRadius:6,padding:12},primary:{fontSize:18,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"#fff",borderWidth:2,borderColor:"#000",borderRadius:4,padding:8},secondary:{fontSize:14,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"transparent",borderWidth:0,borderColor:"#000",borderRadius:0,padding:4}},t.MAP_LINK_STYLE={lineWidth:1,lineColor:"#000",cp1Ratio:.2,cp2Ratio:.2},t.MAP_SELECTION_STYLE={padding:4,outlineColor:"#5bc2e7",outlineWidth:4}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);var r={getChildNodeType:function(e){return"root"===e?"primary":"secondary"},getScaledNodeStyle:function(e,t){var i=o.MAP_NODE_STYLES[e];return n(n({},i),{fontSize:i.fontSize*t,borderWidth:i.borderWidth*t,borderRadius:i.borderRadius*t,padding:i.padding*t})},getScaledLinkStyle:function(e){return n(n({},o.MAP_LINK_STYLE),{lineWidth:o.MAP_LINK_STYLE.lineWidth*e})},getScaledSelectionStyle:function(e){return n(n({},o.MAP_SELECTION_STYLE),{padding:o.MAP_SELECTION_STYLE.padding*e,outlineWidth:o.MAP_SELECTION_STYLE.outlineWidth*e})}};t.default=r},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(3)),r=document.getElementById("app");if(r){var d=new o.default.MindMap(r);d.render();var s=d.rootId,a=d.addNode(s,"primary"),h=d.addNode(s,"primary2");d.addNode(h,"sec2"),d.addNode(s,"primary3");var c=d.addNode(s,"primary10");d.addNode(c,"sec3"),d.addNode(c,"sec3"),d.addNode(c,"sec3"),d.addNode(s,"primary3");var l=d.addNode(s,"primary3");d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5");var u=d.addNode(l,"sec5"),p=d.addNode(l,"sec5");d.addNode(a,"secondary");var _=d.addNode(a,"secondary2");d.addNode(_,"sec");var f=d.addNode(_,"sec");d.addNode(_,"sec"),d.addNode(_,"sec"),d.deleteNode(f),d.deleteNode(p),d.updateNode(s,"rrrrrrrrrrrrrrrrrrrrrrrrrrrr"),d.updateNode(a,"pppppppppppppppppp"),d.copyNode(s),d.pasteNode(_),d.cutNode(c),d.pasteNode(u)}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o={MindMap:n(i(4)).default};t.default=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=r(i(5)),s=r(i(1)),a=i(0),h=function(e){function t(t){var i=e.call(this,t)||this;return i._handleWheel=function(e){if(e.preventDefault(),e.ctrlKey){var t=e.deltaY>0?-.05:.05,n=i._scale+t;n=(n=n>4?4:n)<.5?.5:n,i.scale(n)}else{var o=i._translate;i.translate({x:o.x,y:o.y-5*e.deltaY})}},i._handleMouseDown=function(e){if(0===e.button){var t=i.domToCanvas({x:e.offsetX,y:e.offsetY}),n=i._getNodeAtPosition(t);n&&(i._draggingNodeId=n.id);var o=i.selectedNode();!o||n&&n.id===o.id||i.selectedNode(-1),i._mouseLeftDragging=!0}else 2===e.button&&(i._mouseRightDragging=!0)},i._handleMouseMove=function(e){if(i._mouseLeftDragging)if(i._draggingNodeId>=0);else{var t={x:e.movementX,y:e.movementY},n=i._translate;i.translate({x:n.x+t.x,y:n.y+t.y})}else i._mouseRightDragging},i._handleMouseUp=function(e){0===e.button?(i._draggingNodeId>=0&&(i.selectedNode(i._draggingNodeId),i._draggingNodeId=-1),i._mouseLeftDragging=!1):2===e.button&&(i._mouseRightDragging=!1)},i._handleMouseLeave=function(){i._draggingNodeId=-1,i._mouseLeftDragging=!1,i._mouseRightDragging=!1},i._handleDoubleClick=function(e){if(0===e.button){var t=i.domToCanvas({x:e.offsetX,y:e.offsetY}),n=i._getNodeAtPosition(t);if(!n)return;i._renderInput(n)}},i._handleKeyUp=function(e){var t=i.selectedNode();if(t)switch(e.key){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":break;case"Enter":var n=-1;if(e.ctrlKey)n=i.addNode(t.id);else{var o=t.parent;if(o){var r=o.children.findIndex((function(e){return e.id===t.id}));n=i.addNode(o.id,void 0,r>=0?r+1:void 0)}}i.selectedNode(n);break;case"Delete":i.deleteNode(t.id);break;case"Escape":i.selectedNode(-1);break;case"c":e.ctrlKey&&i.copyNode(t.id);break;case"x":e.ctrlKey&&i.cutNode(t.id);break;case"v":e.ctrlKey&&i.pasteNode(t.id);break;default:return}},i._handleContextMenu=function(e){e.preventDefault()},i._mouseLeftDragging=!1,i._mouseRightDragging=!1,i._draggingNodeId=-1,i._registerInteractions(),i}return o(t,e),t.prototype.dispose=function(){this._unregisterInteractions(),e.prototype.dispose.call(this)},t.prototype._registerInteractions=function(){var e=this._canvas;e.addEventListener("wheel",this._handleWheel),e.addEventListener("mousedown",this._handleMouseDown),e.addEventListener("mouseup",this._handleMouseUp),e.addEventListener("mouseleave",this._handleMouseLeave),e.addEventListener("mousemove",this._handleMouseMove),e.addEventListener("dblclick",this._handleDoubleClick),e.addEventListener("contextmenu",this._handleContextMenu),window.addEventListener("keyup",this._handleKeyUp)},t.prototype._unregisterInteractions=function(){var e=this._canvas;e.removeEventListener("wheel",this._handleWheel),e.removeEventListener("mousedown",this._handleMouseDown),e.removeEventListener("mouseup",this._handleMouseUp),e.removeEventListener("mouseleave",this._handleMouseLeave),e.removeEventListener("mousemove",this._handleMouseMove),e.removeEventListener("dblclick",this._handleDoubleClick),e.removeEventListener("contextmenu",this._handleContextMenu),window.removeEventListener("keyup",this._handleKeyUp)},t.prototype._getNodeAtPosition=function(e){for(var t in this._nodeIndices){var i=this._nodeIndices[t],n=i.position(),o={x:n.x+i.size.w,y:n.y+i.size.h};if(e.x>=n.x&&e.x<=o.x&&e.y>=n.y&&e.y<=o.y)return i}return null},t.prototype._renderInput=function(e){var t=this;if(e){var i=a.MAP_NODE_STYLES[e.type()].borderWidth,n=this.canvasToDom({x:e.position().x+i,y:e.position().y+i}),o=(e.size.w-2*i)*this._scale,r=(e.size.h-2*i)*this._scale,d=s.default.getScaledNodeStyle(e.type(),this._scale),h=document.createElement("input");h.value=e.text(),h.style.font=d.fontStyle+" normal "+d.fontWeight+" "+d.fontSize+"px "+d.fontFamily,h.style.position="absolute",h.style.left=n.x+"px",h.style.top=n.y+"px",h.style.width=o+"px",h.style.minWidth="40px",h.style.height=r+"px",h.addEventListener("blur",(function(i){var n=i.target;n.value&&n.value!==e.text()&&t.updateNode(e.id,n.value),n.remove()})),this._dom.appendChild(h),h.focus()}},t}(d.default);t.default=h},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(6)),r=n(i(1)),d=i(0),s=function(){function e(t){var i,n=this;this.render=function(){n._renderLoop&&(n._innerRender(),requestAnimationFrame(n.render))},this._parentDom=t,this._root=new o.default(e.nextNodeId++,"root",0,"Main Theme"),this._nodeIndices=((i={})[this._root.id]=this._root,i);var r=document.createElement("canvas");r.width=this._parentDom.clientWidth,r.height=this._parentDom.clientHeight;var d=document.createElement("div");d.id="mind-graph-map",d.style.width="100%",d.style.height="100%",d.style.position="relative",d.appendChild(r),this._dom=d,this._parentDom.appendChild(d),this._canvas=r,this._center={x:this._canvas.width/2,y:this._canvas.height/2};var s=this._canvas.getContext("2d");if(!s)throw new Error("Failed to get canvas context 2d.");this._ctx=s,this._scale=1,this._translate={x:0,y:0},this._needsRerender=!0,this._needsReposition=!0,this._renderLoop=!0,this._selectedNodeId=-1,this._copiedNode=null}return e.prototype.scale=function(e){return void 0!==e&&e!==this._scale&&(this._scale=e,this._needsRerender=!0),this._scale},e.prototype.translate=function(e){return void 0===e||e.x===this._translate.x&&e.y===this._translate.y||(this._translate=e,this._needsRerender=!0),this._translate},Object.defineProperty(e.prototype,"rootId",{get:function(){return this._root.id},enumerable:!0,configurable:!0}),e.prototype.selectedNode=function(e){return void 0!==e&&e!==this._selectedNodeId&&(this._selectedNodeId=e,this._needsRerender=!0),this._selectedNodeId<0?null:this._nodeIndices[this._selectedNodeId]},e.prototype.addNode=function(t,i,n){var d=this._nodeIndices[t];if(!d)throw new Error('"addNode" failed, parent node not found.');var s=r.default.getChildNodeType(d.type()),a=new o.default(e.nextNodeId++,s,d.depth+1,i);return"number"==typeof n&&n>=0&&n<=d.children.length?d.children.splice(n,0,a):d.children.push(a),a.parent=d,this._traceBackUpdateSpaces(d),this._nodeIndices[a.id]=a,this._needsRerender=!0,this._needsReposition=!0,a.id},e.prototype.deleteNode=function(e){var t=this._nodeIndices[e];if(!t||!t.parent)return-1;var i=t.parent.children.findIndex((function(t){return t.id===e}));return t.parent.children.splice(i,1),this._traceBackUpdateSpaces(t.parent),delete this._nodeIndices[e],this._selectedNodeId===e&&this.selectedNode(-1),this._needsRerender=!0,this._needsReposition=!0,t.parent.id},e.prototype.updateNode=function(e,t){var i=this._nodeIndices[e];if(!i)throw new Error('"updateNode" failed, node not found.');i.text(t),this._traceBackUpdateSpaces(i),this._needsRerender=!0,this._needsReposition=!0},e.prototype.copyNode=function(e){var t=this._nodeIndices[e];t&&(this._copiedNode=t.clone())},e.prototype.cutNode=function(e){this.copyNode(e),this.deleteNode(e)},e.prototype.pasteNode=function(e){if(this._copiedNode)for(var t=[this._copiedNode],i={};t.length>0;){var n=t.shift();if(n){var o=e;n.parent&&i.hasOwnProperty(n.parent.id)&&(o=i[n.parent.id]);var r=this.addNode(o,n.text());i[n.id]=r,n.children.forEach((function(e){return t.push(e)}))}}},e.prototype.dispose=function(){this._renderLoop=!1,this._dom.remove()},e.prototype.canvasToDom=function(e){return{x:e.x*this._scale+this._center.x+this._translate.x,y:e.y*this._scale+this._center.y+this._translate.y}},e.prototype.domToCanvas=function(e){return{x:(e.x-this._center.x-this._translate.x)/this._scale,y:(e.y-this._center.y-this._translate.y)/this._scale}},e.prototype._innerRender=function(){var e=this;if(this._needsRerender){if(this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.translate(this._center.x+this._translate.x,this._center.y+this._translate.y),this._beforGraphRender(),this._needsReposition){this._root.position({x:-this._root.size.w/2,y:-this._root.size.h/2});for(var t=[this._root],i=function(){var i=t.shift();if(!i)return"continue";n._renderNode(i);var o=i.position().x+i.size.w+d.MAP_HORIZONTAL_INTERVAL,r=i.position().y+i.size.h/2-i.treeSpace().h/2;i.children.forEach((function(n){r+=n.treeSpace().h/2-n.size.h/2,n.position({x:o,y:r}),e._renderLink(i,n),t.push(n),r+=n.size.h/2+n.treeSpace().h/2+d.MAP_VERTICAL_INTERVAL}))},n=this;t.length>0;)i()}else for(var o=[this._root],r=function(){var t=o.shift();if(!t)return"continue";s._renderNode(t),t.children.forEach((function(i){e._renderLink(t,i),o.push(i)}))},s=this;o.length>0;)r();this._renderSelection(),this._afterGraphRender(),this._needsRerender=!1,this._needsReposition=!1}},e.prototype._beforGraphRender=function(){},e.prototype._afterGraphRender=function(){},e.prototype._renderNode=function(e){var t=r.default.getScaledNodeStyle(e.type(),this._scale),i=e.position().x*this._scale,n=e.position().y*this._scale,o=e.size.w*this._scale,d=e.size.h*this._scale,s=this._ctx,a={x:i+t.borderWidth,y:n+t.borderWidth,w:o-2*t.borderWidth,h:d-2*t.borderWidth};if(s.beginPath(),s.fillStyle=t.background,s.fillRect(a.x,a.y,a.w,a.h),t.borderWidth>0){s.beginPath();var h={x:i+t.borderWidth/2,y:n+t.borderWidth/2,w:o-t.borderWidth,h:d-t.borderWidth};s.strokeStyle=t.borderColor,s.lineWidth=t.borderWidth,s.strokeRect(h.x,h.y,h.w,h.h)}s.beginPath(),s.font=t.fontStyle+" normal "+t.fontWeight+" "+t.fontSize+"px "+t.fontFamily,s.fillStyle=t.color,s.fillText(e.text(),i+t.padding+t.borderWidth,n+t.padding+t.borderWidth+t.fontSize)},e.prototype._renderLink=function(e,t){var i={x:(e.position().x+e.size.w)*this._scale,y:(e.position().y+e.size.h/2)*this._scale},n={x:t.position().x*this._scale,y:(t.position().y+t.size.h/2)*this._scale},o=n.x-i.x,d=r.default.getScaledLinkStyle(this._scale),s=this._ctx;s.beginPath(),s.moveTo(i.x,i.y),s.quadraticCurveTo(i.x+d.cp2Ratio*o,n.y,n.x,n.y),s.lineWidth=d.lineWidth,s.strokeStyle=d.lineColor,s.stroke()},e.prototype._renderSelection=function(){if(!(this._selectedNodeId<0)){var e=this._nodeIndices[this._selectedNodeId],t=e.position().x*this._scale,i=e.position().y*this._scale,n=e.size.w*this._scale,o=e.size.h*this._scale,d=r.default.getScaledSelectionStyle(this._scale),s={x:t-d.padding-d.outlineWidth/2,y:i-d.padding-d.outlineWidth/2},a={w:n+2*d.padding+d.outlineWidth,h:o+2*d.padding+d.outlineWidth},h=this._ctx;h.beginPath(),h.strokeStyle=d.outlineColor,h.lineWidth=d.outlineWidth,h.strokeRect(s.x,s.y,a.w,a.h)}},e.prototype._traceBackUpdateSpaces=function(e){var t=e.treeSpace(),i=-1/0,n=e.children.reduce((function(e,t){return t.size.w>i&&(i=t.size.w),e+t.treeSpace().h}),0);(n+=(e.children.length-1)*d.MAP_VERTICAL_INTERVAL)<e.size.h&&(n=e.size.h);var o=i-(t.w-e.size.w-d.MAP_HORIZONTAL_INTERVAL),r=n-t.h;if(0!==o||0!==r)for(var s=e;s;)s.treeSpace({w:s.treeSpace().w+o,h:s.treeSpace().h+r}),s=s.parent},e.nextNodeId=0,e}();t.default=s},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=r(i(7)),s=i(0),a=function(e){function t(t,i,n,o,r){var d=this;return o=o||"New",(d=e.call(this,t,o,r)||this).parent=null,d.children=[],d._type=i,d.depth=n,d._size={w:0,h:0},d._updateSize(),d._treeSpace={w:d._size.w,h:d._size.h},d._position={x:0,y:0},d}return o(t,e),t.prototype.text=function(e){return void 0!==e&&e!==this._text&&(this._text=e,this._updateSize()),this._text},t.prototype.comment=function(e){return void 0!==e&&e!==this._comment&&(this._comment=e,this._updateSize()),this._comment},t.prototype.type=function(e){return void 0!==e&&e!==this._type&&(this._type=e,this._updateSize()),this._type},t.prototype.treeSpace=function(e){return void 0===e||e.w===this._treeSpace.w&&e.h===this._treeSpace.h||(this._treeSpace={w:e.w,h:e.h}),{w:this._treeSpace.w,h:this._treeSpace.h}},t.prototype.position=function(e){return void 0===e||e.x===this._position.x&&e.y===this._position.y||(this._position={x:e.x,y:e.y}),{x:this._position.x,y:this._position.y}},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.id,this._type,this.depth,this._text,this._comment);return e.children=[],e.parent=null,this.children.forEach((function(t){var i=t.clone();i.parent=e,e.children.push(i)})),e},t.prototype._updateSize=function(){var e=s.MAP_NODE_STYLES[this._type],t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Failed to get rulerCanvas context 2d.");t.font=e.fontStyle+" normal "+e.fontWeight+" "+e.fontSize+"px "+e.fontFamily;var i=t.measureText(this._text).width,n=1.4*e.fontSize,o=2*e.padding+2*e.borderWidth,r=i+o,d=n+o;this._size={w:r,h:d}},t}(d.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){this.id=e,this._text=t||"",this._comment=i||""};t.default=n}]);