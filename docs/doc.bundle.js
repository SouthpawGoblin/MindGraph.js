!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAP_HORIZONTAL_INTERVAL=40,t.MAP_VERTICAL_INTERVAL=20,t.MAP_NODE_STYLES={root:{fontSize:28,fontFamily:"Arial",fontWeight:"300",fontStyle:"normal",color:"#fff",background:"#666666",borderWidth:4,borderColor:"#000",borderRadius:6,padding:12,draggingColor:"rgba(255,255,255,0.6)",draggingBackground:"rgba(102,102,102,0.6)",draggingBorderColor:"rgba(0,0,0,0.6)"},primary:{fontSize:18,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"#fff",borderWidth:2,borderColor:"#000",borderRadius:4,padding:8,draggingColor:"rgba(0,0,0,0.6)",draggingBackground:"rgba(255,255,255,0.6)",draggingBorderColor:"rgba(0,0,0,0.6)"},secondary:{fontSize:14,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"transparent",borderWidth:0,borderColor:"#000",borderRadius:0,padding:4,draggingColor:"rgba(0,0,0,0.6)",draggingBackground:"transparent",draggingBorderColor:"rgba(0,0,0,0.6)"}},t.MAP_LINK_STYLE={lineWidth:1,lineColor:"#000",cp1Ratio:.2,cp2Ratio:.2},t.MAP_SELECTION_STYLE={padding:1,outlineColor:"#5bc2e7",outlineWidth:4},t.MAP_INSERT_MARK_STYLE={width:100,height:10,background:"#5bc2e7"}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=i(n(7)),s=n(0),a=function(e){function t(t,n,r,o,i){var d=this;return o=o||"New",(d=e.call(this,t,o,i)||this).parent=null,d.children=[],d._type=n,d.depth=r,d._size={w:0,h:0},d._updateSize(),d._treeSpace=Object.assign({},d._size),d._position={x:0,y:0},d}return o(t,e),t.prototype.text=function(e){return void 0!==e&&e!==this._text&&(this._text=e,this._updateSize()),this._text},t.prototype.comment=function(e){return void 0!==e&&e!==this._comment&&(this._comment=e,this._updateSize()),this._comment},t.prototype.type=function(e){return void 0!==e&&e!==this._type&&(this._type=e,this._updateSize()),this._type},t.prototype.treeSpace=function(e){return void 0===e||e.w===this._treeSpace.w&&e.h===this._treeSpace.h||(this._treeSpace=Object.assign({},e)),Object.assign({},this._treeSpace)},t.prototype.position=function(e){return void 0===e||e.x===this._position.x&&e.y===this._position.y||(this._position=Object.assign({},e)),Object.assign({},this._position)},t.prototype.size=function(e){return void 0===e||e.w===this._size.w&&e.h===this._size.h||(this._size=Object.assign({},e)),Object.assign({},this._size)},t.prototype.clone=function(){var e=new t(this.id,this._type,this.depth,this._text,this._comment);return e.children=[],e.parent=null,this.children.forEach((function(t){var n=t.clone();n.parent=e,e.children.push(n)})),e},t.prototype.traverse=function(e){for(var t=[this];t.length>0;){var n=t.shift();e&&e(n),n.children.forEach((function(e){t.push(e)}))}},t.prototype.isDescendentOf=function(e){for(var t=this,n=!1;t;){if(t.id===e.id){n=!0;break}t=t.parent}return n},t.prototype._updateSize=function(){var e=s.MAP_NODE_STYLES[this._type],t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Failed to get rulerCanvas context 2d.");t.font=e.fontStyle+" normal "+e.fontWeight+" "+e.fontSize+"px "+e.fontFamily;var n=t.measureText(this._text).width,r=1.4*e.fontSize,o=2*e.padding+2*e.borderWidth,i=n+o,d=r+o;this._size={w:i,h:d}},t}(d.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);var i={getChildNodeType:function(e){return"root"===e?"primary":"secondary"},getScaledNodeStyle:function(e,t){var n=o.MAP_NODE_STYLES[e];return r(r({},n),{fontSize:n.fontSize*t,borderWidth:n.borderWidth*t,borderRadius:n.borderRadius*t,padding:n.padding*t})},getScaledLinkStyle:function(e){return r(r({},o.MAP_LINK_STYLE),{lineWidth:o.MAP_LINK_STYLE.lineWidth*e})},getScaledSelectionStyle:function(e){return r(r({},o.MAP_SELECTION_STYLE),{padding:o.MAP_SELECTION_STYLE.padding*e,outlineWidth:o.MAP_SELECTION_STYLE.outlineWidth*e})},getScaledInsertMarkStyle:function(e){return r(r({},o.MAP_INSERT_MARK_STYLE),{width:o.MAP_INSERT_MARK_STYLE.width*e,height:o.MAP_INSERT_MARK_STYLE.height*e})}};t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(4)),i=document.getElementById("app");if(i){var d=new o.default.MindMap(i);d.render();var s=d.rootId,a=d.addNode(s,"primary"),c=d.addNode(s,"primary2");d.addNode(c,"sec2"),d.addNode(s,"primary3");var h=d.addNode(s,"primary10");d.addNode(h,"sec3"),d.addNode(h,"sec3"),d.addNode(h,"sec3"),d.addNode(s,"primary3");var l=d.addNode(s,"primary3");d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5");var u=d.addNode(l,"sec5"),_=d.addNode(l,"sec5");d.addNode(a,"secondary");var p=d.addNode(a,"secondary2");d.addNode(p,"sec");var f=d.addNode(p,"sec");d.addNode(p,"sec"),d.addNode(p,"sec"),d.deleteNode(f),d.deleteNode(_),d.updateNode(s,"rrrrrrrrrrrrrrrrrrrrrrrrrrrr"),d.updateNode(a,"pppppppppppppppppp"),d.copyNode(s),d.pasteNode(p),d.cutNode(h),d.pasteNode(u);var y=d.toJson();console.log(y),setTimeout((function(){return d.loadJson(y)}),3e3)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o={MindMap:r(n(5)).default};t.default=o},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=i(n(6)),s=i(n(1)),a=i(n(2)),c=n(0),h=function(e){function t(t){var n=e.call(this,t)||this;return n._handleWheel=function(e){if(e.preventDefault(),e.ctrlKey){var t=e.deltaY>0?-.05:.05,r=n._scale+t;r=(r=r>4?4:r)<.5?.5:r,n.scale(r)}else{var o=n._translate;n.translate({x:o.x,y:o.y-5*e.deltaY})}},n._handleMouseDown=function(e){if(0===e.button){n._mouseLeftStartPos={x:e.offsetX,y:e.offsetY};var t=n.domToCanvas(n._mouseLeftStartPos),r=n._getNodeAtPosition(t);r?(n._draggingNodeId=r.id,n.selectedNode(n._draggingNodeId)):n.selectedNode(-1),n._mouseLeftDragging=!0}else 2===e.button&&(n._mouseRightStartPos={x:e.offsetX,y:e.offsetY},n._mouseRightDragging=!0)},n._handleMouseMove=function(e){if(n._mouseLeftDragging)if(n._draggingNodeId>=0){var t=n._nodeIndices[n._draggingNodeId];if(t){var r=new s.default(t.id,t.type(),t.depth,t.text(),t.comment()),o=n.canvasToDom(t.position());o=n.domToCanvas({x:o.x+e.offsetX-n._mouseLeftStartPos.x,y:o.y+e.offsetY-n._mouseLeftStartPos.y}),r.position(o);var i=a.default.getScaledNodeStyle(r.type(),n._scale);i.color=i.draggingColor,i.background=i.draggingBackground,i.borderColor=i.draggingBorderColor,requestAnimationFrame((function(){return n._renderNode(r,i)}));var d=n.domToCanvas({x:e.offsetX,y:e.offsetY}),c=n._getNodeAtPosition(d);c&&c.parent&&!c.isDescendentOf(r)&&(n._targetNodeId=c.id,requestAnimationFrame((function(){return n._renderInsertMark(c)}))),n._needsRerender=!0}}else{var h={x:e.movementX,y:e.movementY},l=n._translate;n.translate({x:l.x+h.x,y:l.y+h.y})}else n._mouseRightDragging},n._handleMouseUp=function(e){if(0===e.button){if(n._draggingNodeId>=0){var t=n._nodeIndices[n._draggingNodeId];if(t&&n._targetNodeId>=0){var r=n._nodeIndices[n._targetNodeId];if(r&&r.parent){n.deleteNode(t.id);var o=r.parent.children.findIndex((function(e){return e.id===r.id}));n.addExistingNode(r.parent.id,t,o),n.selectedNode(t.id),n._targetNodeId=-1}}n._draggingNodeId=-1,n._needsRerender=!0}n._mouseLeftStartPos={x:0,y:0},n._mouseLeftDragging=!1}else 2===e.button&&(n._mouseRightStartPos={x:0,y:0},n._mouseRightDragging=!1)},n._handleMouseLeave=function(){n._draggingNodeId=-1,n._mouseLeftDragging=!1,n._mouseRightDragging=!1},n._handleDoubleClick=function(e){if(0===e.button){var t=n.domToCanvas({x:e.offsetX,y:e.offsetY}),r=n._getNodeAtPosition(t);if(!r)return;n._renderInput(r)}},n._handleKeyUp=function(e){var t=n.selectedNode();if(t)switch(e.key){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":break;case"Enter":var r=-1;if(e.ctrlKey)r=n.addNode(t.id);else{var o=t.parent;if(o){var i=o.children.findIndex((function(e){return e.id===t.id}));r=n.addNode(o.id,void 0,i>=0?i+1:void 0)}}var d=n.selectedNode(r);requestAnimationFrame((function(){return n._renderInput(d)}));break;case"Delete":n.deleteNode(t.id);break;case"Escape":n.selectedNode(-1);break;case"c":e.ctrlKey&&n.copyNode(t.id);break;case"x":e.ctrlKey&&n.cutNode(t.id);break;case"v":e.ctrlKey&&n.pasteNode(t.id);break;default:return}},n._handleContextMenu=function(e){e.preventDefault()},n._mouseLeftDragging=!1,n._mouseLeftStartPos={x:0,y:0},n._mouseRightDragging=!1,n._mouseRightStartPos={x:0,y:0},n._draggingNodeId=-1,n._targetNodeId=-1,n._registerInteractions(),n}return o(t,e),t.prototype.dispose=function(){this._unregisterInteractions(),e.prototype.dispose.call(this)},t.prototype._registerInteractions=function(){var e=this._canvas;e.addEventListener("wheel",this._handleWheel),e.addEventListener("mousedown",this._handleMouseDown),e.addEventListener("mouseup",this._handleMouseUp),e.addEventListener("mouseleave",this._handleMouseLeave),e.addEventListener("mousemove",this._handleMouseMove),e.addEventListener("dblclick",this._handleDoubleClick),e.addEventListener("contextmenu",this._handleContextMenu),window.addEventListener("keyup",this._handleKeyUp)},t.prototype._unregisterInteractions=function(){var e=this._canvas;e.removeEventListener("wheel",this._handleWheel),e.removeEventListener("mousedown",this._handleMouseDown),e.removeEventListener("mouseup",this._handleMouseUp),e.removeEventListener("mouseleave",this._handleMouseLeave),e.removeEventListener("mousemove",this._handleMouseMove),e.removeEventListener("dblclick",this._handleDoubleClick),e.removeEventListener("contextmenu",this._handleContextMenu),window.removeEventListener("keyup",this._handleKeyUp)},t.prototype._getNodeAtPosition=function(e){for(var t in this._nodeIndices){var n=this._nodeIndices[t],r=n.position(),o={x:r.x+n.size().w,y:r.y+n.size().h};if(e.x>=r.x&&e.x<=o.x&&e.y>=r.y&&e.y<=o.y)return n}return null},t.prototype._renderInput=function(e){var t=this;if(e){var n=c.MAP_NODE_STYLES[e.type()].borderWidth,r=this.canvasToDom({x:e.position().x+n,y:e.position().y+n}),o=(e.size().w-2*n)*this._scale,i=(e.size().h-2*n)*this._scale,d=a.default.getScaledNodeStyle(e.type(),this._scale),s=document.createElement("input");s.value=e.text(),s.style.font=d.fontStyle+" normal "+d.fontWeight+" "+d.fontSize+"px "+d.fontFamily,s.style.position="absolute",s.style.left=r.x+"px",s.style.top=r.y+"px",s.style.width=o+"px",s.style.minWidth="40px",s.style.height=i+"px",s.addEventListener("blur",(function(n){n.stopPropagation();var r=n.target;r.value&&r.value!==e.text()&&t.updateNode(e.id,r.value),r.remove()})),s.addEventListener("keyup",(function(e){(e.stopPropagation(),"Enter"===e.key||"Escape"===e.key)&&e.target.blur()})),this._dom.appendChild(s),s.focus(),s.select()}},t.prototype._renderInsertMark=function(e){if(e&&e.parent){var t=a.default.getScaledInsertMarkStyle(this._scale),n=a.default.getScaledLinkStyle(this._scale);n.lineColor=t.background;var r=e.clone();r.position({x:e.position().x,y:e.position().y-c.MAP_VERTICAL_INTERVAL/2-t.height/2}),r.size({w:c.MAP_INSERT_MARK_STYLE.width,h:c.MAP_INSERT_MARK_STYLE.height});var o={x:r.position().x*this._scale,y:r.position().y*this._scale,w:t.width,h:t.height};this._renderLink(e.parent,r,n);var i=this._ctx;i.beginPath(),i.fillStyle=t.background,i.fillRect(o.x,o.y,o.w,o.h)}},t}(d.default);t.default=h},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],d=0,s=i.length;d<s;d++,o++)r[o]=i[d];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),d=o(n(2)),s=n(0),a=function(){function e(e){var t,n=this;this.render=function(){n._renderLoop&&(n._innerRender(),requestAnimationFrame(n.render))},this._parentDom=e,this._nextNodeId=0,this._root=new i.default(this._nextNodeId++,"root",0,"Main Theme"),this._nodeIndices=((t={})[this._root.id]=this._root,t);var r=document.createElement("canvas");r.width=this._parentDom.clientWidth,r.height=this._parentDom.clientHeight;var o=document.createElement("div");o.id="mind-graph-map",o.style.width="100%",o.style.height="100%",o.style.position="relative",o.appendChild(r),this._dom=o,this._parentDom.appendChild(o),this._canvas=r,this._center={x:this._canvas.width/2,y:this._canvas.height/2};var d=this._canvas.getContext("2d");if(!d)throw new Error("Failed to get canvas context 2d.");this._ctx=d,this._scale=1,this._translate={x:0,y:0},this._needsRerender=!0,this._needsReposition=!0,this._renderLoop=!0,this._selectedNodeId=-1,this._copiedNode=null}return e.prototype.scale=function(e){return void 0!==e&&e!==this._scale&&(this._scale=e,this._needsRerender=!0),this._scale},e.prototype.translate=function(e){return void 0===e||e.x===this._translate.x&&e.y===this._translate.y||(this._translate=Object.assign({},e),this._needsRerender=!0),Object.assign({},this._translate)},Object.defineProperty(e.prototype,"rootId",{get:function(){return this._root.id},enumerable:!0,configurable:!0}),e.prototype.selectedNode=function(e){return void 0!==e&&e!==this._selectedNodeId&&(this._selectedNodeId=e,this._needsRerender=!0),this._selectedNodeId<0?null:this._nodeIndices[this._selectedNodeId]},e.prototype.addNode=function(e,t,n){var r=this._nodeIndices[e];if(!r)throw new Error('"addNode" failed, parent node not found.');var o=d.default.getChildNodeType(r.type()),s=new i.default(this._nextNodeId++,o,r.depth+1,t);return"number"==typeof n&&n>=0&&n<=r.children.length?r.children.splice(n,0,s):r.children.push(s),s.parent=r,this._traceBackUpdateSpaces(r),this._nodeIndices[s.id]=s,this._needsRerender=!0,this._needsReposition=!0,s.id},e.prototype.addExistingNode=function(e,t,n){var r=this,o=this._nodeIndices[e];if(!o)throw new Error('"addExistingNode" failed, parent node not found.');return"number"==typeof n&&n>=0&&n<=o.children.length?o.children.splice(n,0,t):o.children.push(t),t.parent=o,this._traceBackUpdateSpaces(o),t.traverse((function(e){return r._nodeIndices[e.id]=e})),this._needsRerender=!0,this._needsReposition=!0,t.id},e.prototype.deleteNode=function(e){var t=this,n=this._nodeIndices[e];if(!n||!n.parent)return-1;var r=n.parent.children.findIndex((function(t){return t.id===e}));if(n.parent.children.splice(r,1),this._traceBackUpdateSpaces(n.parent),n.traverse((function(e){return delete t._nodeIndices[e.id]})),this._selectedNodeId===e)if(n.parent.children.length>0){var o=r;r>=n.parent.children.length&&o--,this._selectedNodeId=n.parent.children[o].id}else this._selectedNodeId=n.parent.id;return this._needsRerender=!0,this._needsReposition=!0,n.parent.id},e.prototype.updateNode=function(e,t){var n=this._nodeIndices[e];if(!n)throw new Error('"updateNode" failed, node not found.');n.text(t),this._traceBackUpdateSpaces(n),this._needsRerender=!0,this._needsReposition=!0},e.prototype.copyNode=function(e){var t=this._nodeIndices[e];t&&(this._copiedNode=t.clone())},e.prototype.cutNode=function(e){this.copyNode(e),this.deleteNode(e)},e.prototype.pasteNode=function(e){var t=this;if(this._copiedNode){var n={};this._copiedNode.traverse((function(r){var o=e;r.parent&&n.hasOwnProperty(r.parent.id)&&(o=n[r.parent.id]);var i=t.addNode(o,r.text());n[r.id]=i}))}},e.prototype.dispose=function(){this._renderLoop=!1,this._dom.remove()},e.prototype.canvasToDom=function(e){return{x:e.x*this._scale+this._center.x+this._translate.x,y:e.y*this._scale+this._center.y+this._translate.y}},e.prototype.domToCanvas=function(e){return{x:(e.x-this._center.x-this._translate.x)/this._scale,y:(e.y-this._center.y-this._translate.y)/this._scale}},e.prototype.toJson=function(){var e={rootId:this._root.id};return this._root.traverse((function(t){e[t.id]={id:t.id,text:t.text(),comment:t.comment(),parentId:t.parent?t.parent.id:-1,childrenId:[]},t.children.forEach((function(n){e[t.id].childrenId.push(n.id)}))})),e},e.prototype.loadJson=function(e){var t,n,o=e[e.rootId];if(o){this._nextNodeId=0,this._root=new i.default(this._nextNodeId++,"root",0,o.text,o.comment),this._nodeIndices=((t={})[this._root.id]=this._root,t);for(var d=((n={})[e.rootId]=this._root.id,n),s=r(o.childrenId);s.length>0;){var a=e[s.shift()];if(a){var c=this.addNode(d[a.parentId],a.text);d[a.id]=c,a.childrenId.forEach((function(e){return s.push(e)}))}}}},e.prototype._innerRender=function(){var e=this;this._needsRerender&&(this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.translate(this._center.x+this._translate.x,this._center.y+this._translate.y),this._beforGraphRender(),this._needsReposition?(this._root.position({x:-this._root.size().w/2,y:-this._root.size().h/2}),this._root.traverse((function(t){var n=d.default.getScaledNodeStyle(t.type(),e._scale);e._renderNode(t,n);var r=t.position().x+t.size().w+s.MAP_HORIZONTAL_INTERVAL,o=t.position().y+t.size().h/2-t.treeSpace().h/2;t.children.forEach((function(n){o+=n.treeSpace().h/2-n.size().h/2,n.position({x:r,y:o});var i=d.default.getScaledLinkStyle(e._scale);e._renderLink(t,n,i),o+=n.size().h/2+n.treeSpace().h/2+s.MAP_VERTICAL_INTERVAL}))}))):this._root.traverse((function(t){var n=d.default.getScaledNodeStyle(t.type(),e._scale);e._renderNode(t,n),t.children.forEach((function(n){var r=d.default.getScaledLinkStyle(e._scale);e._renderLink(t,n,r)}))})),this._renderSelection(),this._afterGraphRender(),this._needsRerender=!1,this._needsReposition=!1)},e.prototype._beforGraphRender=function(){},e.prototype._afterGraphRender=function(){},e.prototype._renderNode=function(e,t){var n=e.position().x*this._scale,r=e.position().y*this._scale,o=e.size().w*this._scale,i=e.size().h*this._scale,d=this._ctx,s={x:n+t.borderWidth,y:r+t.borderWidth,w:o-2*t.borderWidth,h:i-2*t.borderWidth};if(d.beginPath(),d.fillStyle=t.background,d.fillRect(s.x,s.y,s.w,s.h),t.borderWidth>0){d.beginPath();var a={x:n+t.borderWidth/2,y:r+t.borderWidth/2,w:o-t.borderWidth,h:i-t.borderWidth};d.strokeStyle=t.borderColor,d.lineWidth=t.borderWidth,d.strokeRect(a.x,a.y,a.w,a.h)}d.beginPath(),d.font=t.fontStyle+" normal "+t.fontWeight+" "+t.fontSize+"px "+t.fontFamily,d.fillStyle=t.color,d.fillText(e.text(),n+t.padding+t.borderWidth,r+t.padding+t.borderWidth+t.fontSize)},e.prototype._renderLink=function(e,t,n){var r={x:(e.position().x+e.size().w)*this._scale,y:(e.position().y+e.size().h/2)*this._scale},o={x:t.position().x*this._scale,y:(t.position().y+t.size().h/2)*this._scale},i=o.x-r.x,d=this._ctx;d.beginPath(),d.moveTo(r.x,r.y),d.quadraticCurveTo(r.x+n.cp2Ratio*i,o.y,o.x,o.y),d.lineWidth=n.lineWidth,d.strokeStyle=n.lineColor,d.stroke()},e.prototype._renderSelection=function(){if(!(this._selectedNodeId<0)){var e=this._nodeIndices[this._selectedNodeId],t=e.position().x*this._scale,n=e.position().y*this._scale,r=e.size().w*this._scale,o=e.size().h*this._scale,i=d.default.getScaledSelectionStyle(this._scale),s={x:t-i.padding-i.outlineWidth/2,y:n-i.padding-i.outlineWidth/2},a={w:r+2*i.padding+i.outlineWidth,h:o+2*i.padding+i.outlineWidth},c=this._ctx;c.beginPath(),c.strokeStyle=i.outlineColor,c.lineWidth=i.outlineWidth,c.strokeRect(s.x,s.y,a.w,a.h)}},e.prototype._traceBackUpdateSpaces=function(e){var t=e.treeSpace(),n=-1/0,r=e.children.reduce((function(e,t){return t.size().w>n&&(n=t.size().w),e+t.treeSpace().h}),0);(r+=(e.children.length-1)*s.MAP_VERTICAL_INTERVAL)<e.size().h&&(r=e.size().h);var o=n-(t.w-e.size().w-s.MAP_HORIZONTAL_INTERVAL),i=r-t.h;if(0!==o||0!==i)for(var d=e;d;)d.treeSpace({w:d.treeSpace().w+o,h:d.treeSpace().h+i}),d=d.parent},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){this.id=e,this._text=t||"",this._comment=n||""};t.default=r}]);