!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAP_HORIZONTAL_INTERVAL=40,t.MAP_VERTICAL_INTERVAL=20,t.MAP_NODE_STYLES={root:{fontSize:28,fontFamily:"Arial",fontWeight:"300",fontStyle:"normal",color:"#fff",background:"#666666",borderWidth:4,borderColor:"#000",borderRadius:6,padding:12},primary:{fontSize:18,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"#fff",borderWidth:2,borderColor:"#000",borderRadius:4,padding:8},secondary:{fontSize:14,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000",background:"transparent",borderWidth:0,borderColor:"#000",borderRadius:0,padding:4}},t.MAP_LINK_STYLE={lineWidth:1,lineColor:"#000",cp1Ratio:.2,cp2Ratio:.2},t.MAP_SELECTION_STYLE={padding:4,outlineColor:"#5bc2e7",outlineWidth:4}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(2)),o=document.getElementById("app");if(o){var d=new r.default.MindMap(o);d.render();var s=d.rootId,a=d.addNode(s,"primary"),c=d.addNode(s,"primary2");d.addNode(c,"sec2"),d.addNode(s,"primary3");var h=d.addNode(s,"primary3");d.addNode(h,"sec3"),d.addNode(h,"sec3"),d.addNode(h,"sec3"),d.addNode(s,"primary3");var l=d.addNode(s,"primary3");d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5"),d.addNode(l,"sec5");var u=d.addNode(l,"sec5");d.addNode(a,"secondary");var _=d.addNode(a,"secondary2");d.addNode(_,"sec");var p=d.addNode(_,"sec");d.addNode(_,"sec"),d.addNode(_,"sec"),d.deleteNode(p),d.deleteNode(u),d.updateNode(s,"rrrrrrrrrrrrrrrrrrrrrrrrrrrr"),d.updateNode(a,"pppppppppppppppppp")}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r={MindMap:n(i(3)).default};t.default=r},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(t){var i=e.call(this,t)||this;return i.handleWheel=function(e){if(e.preventDefault(),e.ctrlKey){var t=e.deltaY>0?-.05:.05,n=i._scale+t;n=(n=n>4?4:n)<.2?.2:n,i.scale(n)}else{var r=i._translate;i.translate({x:r.x,y:r.y-5*e.deltaY})}},i.handleMouseDown=function(e){0===e.button?i._leftDragging=!0:2===e.button&&(i._rightDragging=!0)},i.handleMouseUp=function(e){0===e.button?i._leftDragging=!1:2===e.button&&(i._rightDragging=!1)},i.handleMouseLeave=function(){i._leftDragging=!1,i._rightDragging=!1},i.handleMouseMove=function(e){if(i._leftDragging){var t={x:e.movementX,y:e.movementY},n=i._translate;i.translate({x:n.x+t.x,y:n.y+t.y})}else i._rightDragging},i.handleContextMenu=function(e){e.preventDefault()},i._onCanvasClick=function(e){var t={x:e.offsetX-i._center.x-i._translate.x,y:e.offsetY-i._center.y-i._translate.y},n=i._getNodeAtPosition(t);n&&n.id===i._lastSelectedNodeId||(i._lastSelectedNodeId>=0&&(i._nodeIndices[i._lastSelectedNodeId].selected(!1),i._lastSelectedNodeId=-1),n&&(n.selected(!0),i._lastSelectedNodeId=n.id),i._needsRerender=!0)},i._leftDragging=!1,i._rightDragging=!1,i._registerInteractions(),i}return r(t,e),t.prototype.dispose=function(){this._unregisterInteractions(),e.prototype.dispose.call(this)},t.prototype._registerInteractions=function(){var e=this._canvas;e.addEventListener("wheel",this.handleWheel),e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("mouseup",this.handleMouseUp),e.addEventListener("mouseleave",this.handleMouseLeave),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("contextmenu",this.handleContextMenu)},t.prototype._unregisterInteractions=function(){},t.prototype._getNodeAtPosition=function(e){for(var t in this._nodeIndices){var i=this._nodeIndices[t],n={x:i.position().x*this._scale,y:i.position().y*this._scale},r={x:n.x+i.size.w*this._scale,y:n.y+i.size.h*this._scale};if(e.x>=n.x&&e.x<=r.x&&e.y>=n.y&&e.y<=r.y)return i}return null},t}(o(i(4)).default);t.default=d},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),o=n(i(7)),d=i(0),s=function(){function e(t){var i,n=this;this.render=function(){n._renderLoop&&(n._innerRender(),requestAnimationFrame(n.render))},this._parentDom=t,this._root=new r.default(e.nextNodeId++,"root",0,"Main Theme"),this._nodeIndices=((i={})[this._root.id]=this._root,i);var o=document.createElement("canvas");o.id="mind-graph-map",o.width=this._parentDom.clientWidth,o.height=this._parentDom.clientHeight,this._parentDom.appendChild(o),this._canvas=o,this._center={x:this._canvas.width/2,y:this._canvas.height/2};var d=this._canvas.getContext("2d");if(!d)throw new Error("Failed to get canvas context 2d.");this._ctx=d,this._scale=1,this._translate={x:0,y:0},this._needsRerender=!0,this._needsReposition=!0,this._renderLoop=!0,this._lastSelectedNodeId=-1}return e.prototype.scale=function(e){return void 0!==e&&e!==this._scale&&(this._scale=e,this._needsRerender=!0),this._scale},e.prototype.translate=function(e){return void 0===e||e.x===this._translate.x&&e.y===this._translate.y||(this._translate=e,this._needsRerender=!0),this._translate},Object.defineProperty(e.prototype,"rootId",{get:function(){return this._root.id},enumerable:!0,configurable:!0}),e.prototype.addNode=function(t,i){var n=this._nodeIndices[t];if(!n)throw new Error('"addNode" failed, parent node not found.');var o="root"===n.type()?"primary":"secondary",d=new r.default(e.nextNodeId++,o,n.depth+1,i);return n.children.push(d),d.parent=n,this._traceBackUpdateSpaces(n),this._nodeIndices[d.id]=d,this._needsRerender=!0,this._needsReposition=!0,d.id},e.prototype.deleteNode=function(e){var t=this._nodeIndices[e];if(!t||!t.parent)return-1;var i=t.parent.children.findIndex((function(t){return t.id===e}));return t.parent.children.splice(i,1),this._traceBackUpdateSpaces(t.parent),delete this._nodeIndices[e],this._needsRerender=!0,this._needsReposition=!0,t.parent.id},e.prototype.updateNode=function(e,t){var i=this._nodeIndices[e];if(!i)throw new Error('"updateNode" failed, node not found.');i.text(t),this._traceBackUpdateSpaces(i),this._needsRerender=!0,this._needsReposition=!0},e.prototype.dispose=function(){this._renderLoop=!1,this._canvas.remove()},e.prototype._innerRender=function(){var e=this;if(this._needsRerender){if(this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.translate(this._center.x+this._translate.x,this._center.y+this._translate.y),this._needsReposition){this._root.position({x:-this._root.size.w/2,y:-this._root.size.h/2});for(var t=[this._root],i=function(){var i=t.shift();if(!i)return"continue";n._renderNode(i);var r=i.position().x+i.size.w+d.MAP_HORIZONTAL_INTERVAL,o=i.position().y+i.size.h/2-i.treeSpace().h/2;i.children.forEach((function(n){o+=n.treeSpace().h/2-n.size.h/2,n.position({x:r,y:o}),e._renderLink(i,n),t.push(n),o+=n.size.h/2+n.treeSpace().h/2+d.MAP_VERTICAL_INTERVAL}))},n=this;t.length>0;)i()}else for(var r=[this._root],o=function(){var t=r.shift();if(!t)return"continue";s._renderNode(t),t.children.forEach((function(i){e._renderLink(t,i),r.push(i)}))},s=this;r.length>0;)o();this._renderSelection(),this._needsRerender=!1,this._needsReposition=!1}},e.prototype._renderNode=function(e){var t=o.default.getScaledNodeStyle(e.type(),this._scale),i=e.position().x*this._scale,n=e.position().y*this._scale,r=e.size.w*this._scale,d=e.size.h*this._scale,s=this._ctx,a={x:i+t.borderWidth,y:n+t.borderWidth,w:r-2*t.borderWidth,h:d-2*t.borderWidth};if(s.beginPath(),s.fillStyle=t.background,s.fillRect(a.x,a.y,a.w,a.h),t.borderWidth>0){s.beginPath();var c={x:i+t.borderWidth/2,y:n+t.borderWidth/2,w:r-t.borderWidth,h:d-t.borderWidth};s.strokeStyle=t.borderColor,s.lineWidth=t.borderWidth,s.strokeRect(c.x,c.y,c.w,c.h)}s.beginPath(),s.font=t.fontStyle+" normal "+t.fontWeight+" "+t.fontSize+"px "+t.fontFamily,s.fillStyle=t.color,s.fillText(e.text(),i+t.padding+t.borderWidth,n+t.padding+t.borderWidth+t.fontSize)},e.prototype._renderLink=function(e,t){var i={x:(e.position().x+e.size.w)*this._scale,y:(e.position().y+e.size.h/2)*this._scale},n={x:t.position().x*this._scale,y:(t.position().y+t.size.h/2)*this._scale},r=n.x-i.x,d=o.default.getScaledLinkStyle(this._scale),s=this._ctx;s.beginPath(),s.moveTo(i.x,i.y),s.quadraticCurveTo(i.x+d.cp2Ratio*r,n.y,n.x,n.y),s.lineWidth=d.lineWidth,s.strokeStyle=d.lineColor,s.stroke()},e.prototype._renderSelection=function(){if(!(this._lastSelectedNodeId<0)){var e=this._nodeIndices[this._lastSelectedNodeId],t=e.position().x*this._scale,i=e.position().y*this._scale,n=e.size.w*this._scale,r=e.size.h*this._scale,d=o.default.getScaledSelectionStyle(this._scale),s={x:t-d.padding-d.outlineWidth/2,y:i-d.padding-d.outlineWidth/2},a={w:n+2*d.padding+d.outlineWidth,h:r+2*d.padding+d.outlineWidth},c=this._ctx;c.beginPath(),c.strokeStyle=d.outlineColor,c.lineWidth=d.outlineWidth,c.strokeRect(s.x,s.y,a.w,a.h)}},e.prototype._traceBackUpdateSpaces=function(e){var t=e.treeSpace(),i=-1/0,n=e.children.reduce((function(e,t){return t.size.w>i&&(i=t.size.w),e+t.treeSpace().h}),0);(n+=(e.children.length-1)*d.MAP_VERTICAL_INTERVAL)<e.size.h&&(n=e.size.h);var r=i-(t.w-e.size.w-d.MAP_HORIZONTAL_INTERVAL),o=n-t.h;if(0!==r||0!==o)for(var s=e;s;)s.treeSpace({w:s.treeSpace().w+r,h:s.treeSpace().h+o}),s=s.parent},e.nextNodeId=0,e}();t.default=s},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=o(i(6)),s=i(0),a=function(e){function t(t,i,n,r,o){var d=e.call(this,t,r,o)||this;return d.parent=null,d.children=[],d._type=i,d.depth=n,d._size={w:0,h:0},d._updateSize(),d._treeSpace={w:d._size.w,h:d._size.h},d._position={x:0,y:0},d._selected=!1,d}return r(t,e),t.prototype.text=function(e){return void 0!==e&&e!==this._text&&(this._text=e,this._updateSize()),this._text},t.prototype.comment=function(e){return void 0!==e&&e!==this._comment&&(this._comment=e,this._updateSize()),this._comment},t.prototype.type=function(e){return void 0!==e&&e!==this._type&&(this._type=e,this._updateSize()),this._type},t.prototype.treeSpace=function(e){return void 0===e||e.w===this._treeSpace.w&&e.h===this._treeSpace.h||(this._treeSpace={w:e.w,h:e.h}),{w:this._treeSpace.w,h:this._treeSpace.h}},t.prototype.position=function(e){return void 0===e||e.x===this._position.x&&e.y===this._position.y||(this._position={x:e.x,y:e.y}),{x:this._position.x,y:this._position.y}},t.prototype.selected=function(e){return void 0!==e&&(this._selected=e),this._selected},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype._updateSize=function(){var e=s.MAP_NODE_STYLES[this._type],t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Failed to get rulerCanvas context 2d.");t.font=e.fontStyle+" normal "+e.fontWeight+" "+e.fontSize+"px "+e.fontFamily;var i=t.measureText(this._text).width,n=1.4*e.fontSize,r=2*e.padding+2*e.borderWidth,o=i+r,d=n+r;this._size={w:o,h:d}},t}(d.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){this.id=e,this._text=t||"",this._comment=i||""};t.default=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0);var o={getScaledNodeStyle:function(e,t){var i=r.MAP_NODE_STYLES[e];return n(n({},i),{fontSize:i.fontSize*t,borderWidth:i.borderWidth*t,borderRadius:i.borderRadius*t,padding:i.padding*t})},getScaledLinkStyle:function(e){return n(n({},r.MAP_LINK_STYLE),{lineWidth:r.MAP_LINK_STYLE.lineWidth*e})},getScaledSelectionStyle:function(e){return n(n({},r.MAP_SELECTION_STYLE),{padding:r.MAP_SELECTION_STYLE.padding*e,outlineWidth:r.MAP_SELECTION_STYLE.outlineWidth*e})}};t.default=o}]);